{
  super(new BorderLayout());
  this.database=Preconditions.checkNotNull(database,"IE01317: Database argument can't be null");
  this.database.addListener(databaseListener);
  final JPanel lowerPanel=new JPanel(new BorderLayout());
  final JPanel outerDescriptionPanel=new JPanel(new BorderLayout(5,5));
  outerDescriptionPanel.setBorder(new TitledBorder("Database"));
  final JPanel innerDescriptionPanel=new JPanel(new BorderLayout());
  innerDescriptionPanel.setBorder(new EmptyBorder(0,0,8,0));
  ToolTipManager.sharedInstance().setDismissDelay(Integer.MAX_VALUE);
  final JLabel label=new CHelpLabel("Description" + ":",new DatabaseDescriptionFieldHelp());
  final int PREFERRED_LABEL_WIDTH=110;
  final int PREFERRED_LABEL_HEIGHT=25;
  label.setPreferredSize(new Dimension(PREFERRED_LABEL_WIDTH,PREFERRED_LABEL_HEIGHT));
  innerDescriptionPanel.add(label,BorderLayout.WEST);
  innerDescriptionPanel.add(databaseDescriptionField,BorderLayout.CENTER);
  outerDescriptionPanel.add(innerDescriptionPanel,BorderLayout.CENTER);
  final JPanel pDB4=new JPanel(new BorderLayout());
  pDB4.setBorder(new EmptyBorder(0,0,0,0));
  final JPanel pDB3=new JPanel(new BorderLayout());
  pDB3.setBorder(new EmptyBorder(5,0,5,0));
  final JPanel pDB2=new JPanel(new BorderLayout());
  pDB2.setBorder(new EmptyBorder(0,0,5,0));
  final JPanel pDB=new JPanel(new GridLayout(4,1,5,5));
  pDB.setBorder(new EmptyBorder(0,0,5,0));
  final JPanel borderHelperPanel=new JPanel(new BorderLayout());
  borderHelperPanel.setBorder(new TitledBorder("Connection"));
  pDB.add(new CStandardPanel("DB host:",new DatabaseHostFieldHelp(),databaseHostField));
  pDB.add(new CStandardPanel("DB name:",new DatabaseNameFieldHelp(),databaseNameField));
  pDB.add(new CStandardPanel("DB user:",new DatabaseUserFieldHelp(),databaseUserField));
  pDB.add(new CStandardPanel("DB password:",new CPasswordHelp(),passwordField));
  pDB.add(new CStandardPanel("",null,showPasswordBox));
  borderHelperPanel.add(pDB,BorderLayout.CENTER);
  pDB2.add(borderHelperPanel,BorderLayout.CENTER);
  final JPanel mainPanel=new JPanel(new GridLayout(1,2,5,5));
  final JPanel p5_h=new JPanel(new BorderLayout());
  final JPanel p5_h2=new JPanel(new BorderLayout());
  mainPanel.setBorder(new EmptyBorder(0,0,5,0));
  final JPanel savePasswordPanel=new JPanel(new BorderLayout());
  savePasswordPanel.add(savePasswordBox,BorderLayout.WEST);
  mainPanel.add(savePasswordPanel);
  final JPanel autoConnectPanel=new JPanel(new BorderLayout());
  autoConnectPanel.add(autoConnectBox,BorderLayout.WEST);
  mainPanel.add(autoConnectPanel);
  p5_h.setBorder(new TitledBorder(new TitledBorder("Behavior")));
  p5_h.add(mainPanel,BorderLayout.CENTER);
  p5_h2.setBorder(new EmptyBorder(0,0,5,0));
  p5_h2.add(p5_h,BorderLayout.CENTER);
  pDB3.add(pDB2,BorderLayout.NORTH);
  final JPanel identityPanel=new JPanel(new BorderLayout());
  final JPanel identitySubPanel=new JPanel(new BorderLayout());
  identitySubPanel.setBorder(new TitledBorder(null,"Identity",TitledBorder.LEADING,TitledBorder.TOP,null,null));
  identitySubPanel.add(new CStandardPanel("Identity" + ":",new DatabaseIdentityFieldHelp(),databaseIdentityField));
  identityPanel.add(identitySubPanel,BorderLayout.CENTER);
  pDB3.add(identityPanel,BorderLayout.CENTER);
  pDB3.add(p5_h2,BorderLayout.SOUTH);
  savePasswordBox.addActionListener(new InternalActionListener());
  final JPanel centerPanel=new JPanel(new BorderLayout());
  final JPanel buttonPanel=new JPanel(new GridLayout(1,3,5,5));
  buttonPanel.setBorder(new EmptyBorder(0,2,0,2));
  buttonPanel.add(testButton);
  buttonPanel.add(saveButton);
  final JPanel savePanel=new JPanel(new FlowLayout());
  saveLabel=new JLabel("Please hit the Save button to use the current database connection from BinNavi");
  saveLabel.setBorder(new CompoundBorder(new LineBorder(Color.RED,2),new EmptyBorder(5,5,5,5)));
  saveLabel.setForeground(Color.RED);
  savePanel.add(saveLabel);
  centerPanel.add(savePanel,BorderLayout.NORTH);
  centerPanel.add(buttonPanel,BorderLayout.CENTER);
  pDB4.add(pDB3,BorderLayout.NORTH);
  pDB4.add(centerPanel,BorderLayout.CENTER);
  lowerPanel.add(outerDescriptionPanel,BorderLayout.NORTH);
  lowerPanel.add(pDB4,BorderLayout.CENTER);
  add(lowerPanel);
  databaseDescriptionField.setText(this.database.getConfiguration().getDescription());
  databaseHostField.setText(this.database.getConfiguration().getHost());
  databaseNameField.setText(this.database.getConfiguration().getName());
  databaseUserField.setText(this.database.getConfiguration().getUser());
  databaseIdentityField.setText(this.database.getConfiguration().getIdentity());
  passwordField.setText(this.database.getConfiguration().getPassword());
  savePasswordBox.setSelected(this.database.getConfiguration().isSavePassword());
  autoConnectBox.setSelected(this.database.getConfiguration().isAutoConnect());
  updateSaveButton();
  final UpdateListener updateListener=new UpdateListener();
  databaseDescriptionField.getDocument().addDocumentListener(updateListener);
  databaseHostField.getDocument().addDocumentListener(updateListener);
  databaseNameField.getDocument().addDocumentListener(updateListener);
  databaseUserField.getDocument().addDocumentListener(updateListener);
  databaseIdentityField.getDocument().addDocumentListener(updateListener);
  passwordField.getDocument().addDocumentListener(updateListener);
  savePasswordBox.addItemListener(updateListener);
  autoConnectBox.addItemListener(updateListener);
  setupHotkeys();
}

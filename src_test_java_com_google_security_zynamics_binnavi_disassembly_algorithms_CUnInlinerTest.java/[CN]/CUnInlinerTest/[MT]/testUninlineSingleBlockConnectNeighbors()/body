{
  final List<INaviViewNode> nodes=new FilledList<INaviViewNode>();
  final List<INaviEdge> edges=new FilledList<INaviEdge>();
  final INaviFunction mockFunction=new MockFunction(m_provider);
  final INaviFunction mockFunction2=new MockFunction(m_provider);
  final MockInstruction mi1=new MockInstruction(0x123);
  final MockInstruction mi2=new MockInstruction(0x124);
  final MockInstruction mi3=new MockInstruction(0x125);
  final CCodeNode parentNode=new CCodeNode(1,0,0,0,0,Color.RED,Color.RED,false,true,null,mockFunction,new HashSet<CTag>(),m_provider);
  final CCodeNode upperNode=new CCodeNode(2,0,0,0,0,Color.RED,Color.RED,false,true,null,mockFunction,new HashSet<CTag>(),m_provider);
  final CCodeNode inlinedNode=new CCodeNode(3,0,0,0,0,Color.RED,Color.RED,false,true,null,mockFunction2,new HashSet<CTag>(),m_provider);
  final CCodeNode lowerNode=new CCodeNode(4,0,0,0,0,Color.RED,Color.RED,false,true,null,mockFunction,new HashSet<CTag>(),m_provider);
  final CCodeNode childNode1=new CCodeNode(5,0,0,0,0,Color.RED,Color.RED,false,true,null,mockFunction,new HashSet<CTag>(),m_provider);
  final CCodeNode childNode2=new CCodeNode(6,0,0,0,0,Color.RED,Color.RED,false,true,null,mockFunction,new HashSet<CTag>(),m_provider);
  upperNode.addInstruction(mi1,null);
  inlinedNode.addInstruction(mi2,null);
  lowerNode.addInstruction(mi3,null);
  nodes.add(parentNode);
  nodes.add(upperNode);
  nodes.add(inlinedNode);
  nodes.add(lowerNode);
  nodes.add(childNode1);
  nodes.add(childNode2);
  final CNaviViewEdge parentEdge=new CNaviViewEdge(0,parentNode,upperNode,EdgeType.JUMP_UNCONDITIONAL,0,0,0,0,Color.BLACK,false,true,null,new FilledList<CBend>(),m_provider);
  final CNaviViewEdge enteringEdge=new CNaviViewEdge(1,upperNode,inlinedNode,EdgeType.ENTER_INLINED_FUNCTION,0,0,0,0,Color.BLACK,false,true,null,new FilledList<CBend>(),m_provider);
  final CNaviViewEdge leavingEdge=new CNaviViewEdge(2,inlinedNode,lowerNode,EdgeType.LEAVE_INLINED_FUNCTION,0,0,0,0,Color.BLACK,false,true,null,new FilledList<CBend>(),m_provider);
  final CNaviViewEdge childEdge1=new CNaviViewEdge(3,lowerNode,childNode1,EdgeType.JUMP_CONDITIONAL_FALSE,0,0,0,0,Color.BLACK,false,true,null,new FilledList<CBend>(),m_provider);
  final CNaviViewEdge childEdge2=new CNaviViewEdge(4,lowerNode,childNode2,EdgeType.JUMP_CONDITIONAL_TRUE,0,0,0,0,Color.BLACK,false,true,null,new FilledList<CBend>(),m_provider);
  edges.add(parentEdge);
  edges.add(enteringEdge);
  edges.add(leavingEdge);
  edges.add(childEdge1);
  edges.add(childEdge2);
  connect(parentNode,upperNode,parentEdge);
  connect(upperNode,inlinedNode,enteringEdge);
  connect(inlinedNode,lowerNode,leavingEdge);
  connect(lowerNode,childNode1,childEdge1);
  connect(lowerNode,childNode2,childEdge2);
  final MockView view=new MockView(nodes,edges,m_provider);
  CUnInliner.unInline(view,inlinedNode);
  assertEquals(4,view.getNodeCount());
  assertEquals(3,view.getEdgeCount());
  assertEquals(EdgeType.JUMP_UNCONDITIONAL,view.getGraph().getEdges().get(0).getType());
  assertEquals(EdgeType.JUMP_CONDITIONAL_FALSE,view.getGraph().getEdges().get(1).getType());
  assertEquals(EdgeType.JUMP_CONDITIONAL_TRUE,view.getGraph().getEdges().get(2).getType());
  final INaviCodeNode cnode=(INaviCodeNode)view.getGraph().getNodes().get(3);
  assertEquals(2,Iterables.size(cnode.getInstructions()));
  assertEquals(mi1.toString(),Iterables.get(cnode.getInstructions(),0).toString());
  assertEquals(mi3.toString(),Iterables.get(cnode.getInstructions(),1).toString());
}
